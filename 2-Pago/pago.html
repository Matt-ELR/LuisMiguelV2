<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pago</title>
    <link rel="stylesheet" href="../CSS/styles.css">
    <script src="https://pay.google.com/gp/p/js/pay.js" async></script>
</head>
<body>
    <div class="floating-island">
        <h1>Proceda al pago</h1>
        <p>Para poder brindale el mejor servicio, necesitamos una peque√±a cuota</p>
        <div id="google-pay-button-container"></div>
    </div>

    <script>
        function onGooglePayLoaded() {
            const paymentsClient = new google.payments.api.PaymentsClient({environment: 'TEST'});
            const button = paymentsClient.createButton({onClick: onGooglePaymentButtonClicked});
            document.getElementById('google-pay-button-container').appendChild(button);
        }

        function onGooglePaymentButtonClicked() {
            const paymentDataRequest = {
                apiVersion: 2,
                apiVersionMinor: 0,
                allowedPaymentMethods: [{
                    type: 'CARD',
                    parameters: {
                        allowedAuthMethods: ['PAN_ONLY', 'CRYPTOGRAM_3DS'],
                        allowedCardNetworks: ['MASTERCARD', 'VISA']
                    },
                    tokenizationSpecification: {
                        type: 'PAYMENT_GATEWAY',
                        parameters: {
                            gateway: 'example',
                            gatewayMerchantId: 'exampleMerchantId'
                        }
                    }
                }],
                merchantInfo: {
                    merchantId: 'your-merchant-id',
                    merchantName: 'Your Merchant Name'
                },
                transactionInfo: {
                    totalPriceStatus: 'FINAL',
                    totalPrice: '1.00',
                    currencyCode: 'USD',
                    countryCode: 'US'
                }
            };

            paymentsClient.loadPaymentData(paymentDataRequest).then(function(paymentData) {
                window.location.href = "content.html";
            }).catch(function(err) {
                console.error(err);
            });
        }
    </script>
    <script async src="https://pay.google.com/gp/p/js/pay.js?onload=onGooglePayLoaded"></script>
</body>
</html>
